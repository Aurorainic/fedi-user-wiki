---
title: 必要的数字“基建”资源
createTime: 2025/05/21 13:25:54
permalink: /for-admin/resources/
---
::: info
本页内容可能存在未解释清楚的地方，欢迎指出或修改。
:::
联邦宇宙的一个实例或者说服务器，同样也是一个网站。那么想要搭建它就不可避免的需要一些“网络基础设施”，我们一个个来看。

## 域名

### 注册（购买）
域名是网络中的唯一标识符。在联邦宇宙中，每一个实例与域名强关联，每个实例中的用户也是以域名后缀来判定账户所属。  
举例： ``@zhangsan@shili.com``，``shili.com`` 是 ``zhangsan`` 账户的域名后缀。

域名的注册与购买，都需要一个域名注册商。国内的如[阿里云（万网）](https://wanwang.aliyun.com/domain)、[腾讯云](https://dnspod.cloud.tencent.com/)，国外也有像 [Namesilo](https://www.namesilo.com/), [Spaceship](https://www.spaceship.com/domains/) 等平台。

市面上有很多看着“杂乱无章”的域名，这些用于个人的服务使用无可厚非而且相对很便宜，但作为联邦宇宙的一个实例而言并不建议单纯图便宜而在名字上没什么逻辑。
fedi 实例可以放在一级域名，如 ``flower-fedi.com``；也可以放在二级域名上，如 ``fedi.flower.com``，视你的服务规划而定。

域名一般以年为单位注册于续费，价格组成受多种因素影响，如域名后缀，主域名命名的长度、复杂度、受“追捧”的程度，域名服务商的定价策略等。

### 域名 DNS 解析
当你的域名注册成功后，需要对你的域名作 DNS 解析配置，并将域名解析到你的服务上。
很多域名服务商自带 DNS 解析管理板块，但对于解析效果因平台而异。
对于新手用户，个人推荐使用 [Cloudflare](https://www.cloudflare.com/)，它拥有相对有好的操作面板、完善的教程，并且可以顺带提供一定的免费 CDN 服务。
~~由于是境外服务平台，所以对于国内部分用户而言，用 Cloudflare 解析并不一定会让访问速度更好。~~

## 服务器
服务器是运行你的实例的载体，由于联邦宇宙服务的特性，它需要具备一定的硬件配置，如 CPU、内存、硬盘速度与容量、网络带宽等。
举例：Mastodon 由于默认会缓存所有（包括全局时间线）的所有内容（包括远程媒体），因此服务器的存储不能过低。

::: details 详细说明

| 要素 | 说明 |
| :------------------------- | :-------------------------- |
| CPU (处理器)   | - Mastodon (Ruby) 和 Misskey (Node.js) 都需要多核处理器。<br>- 建议至少 2 vCPU 起步。|
| RAM (内存)       | - Mastodon 尤其消耗内存，小型实例建议至少 4GB。<br>- Misskey 相对 Mastodon 相对需求小。<br>- 内存不足会严重影响性能。|
| 硬盘   | - **类型：** 强烈推荐 NVMe SSD 型；SATA SSD 次之。<br>- **容量：** 需求较大 (操作系统、数据库、媒体文件、缓存、日志)。初期可考虑 20 GB，但需确保易于扩容或接入对象存储以分散存储压力。|
| 网络带宽与流量   | - 需要高带宽以保证媒体加载和联邦通信速度。<br>- 有时云服务器产品会限制总流量，需额外留意。|
| 数据库性能 | - 主要依赖 PostgreSQL。<br>- 磁盘 IOPS 对性能至关重要 (SSD优势明显)。<br>- 若数据库与服务端在同一服务器，需保证相应资源够用；大型实例可考虑另开服务器作为数据库托管。|
| 缓存 | - 通常使用 Redis 进行数据缓存和后台任务队列管理。<br>- 确保为 Redis 分配足够的内存。|
| 可扩展性 | - **垂直扩展：** 通过云服务商管理面板便捷增加现有服务器的 CPU、RAM、存储等资源总量。<br>- **水平扩展：** (更复杂) 将不同子服务部分划分到不同服务器分别托管计算。<br>- **媒体文件：** 强烈建议使用对象存储 (如 S3, Cloudflare R2 等) 处理大量媒体，减轻主服务器压力。|
| 服务器位置与延迟 | - 选择地理位置靠近主要用户的服务器区域，以减少访问延迟。|
| 操作系统与软件 | - 绝大多数实例运行在 Linux 系统上 (如 Debian)。<br>- 确保云服务商提供你偏好的发行版，并允许 root 权限。|
| 备份与灾难恢复 | - **定期备份**至关重要：数据库、媒体文件 (若未使用自带冗余的对象存储)、应用配置文件。<br>- 利用云服务商提供的自动快照或备份服务。<br>- 考虑异地备份以增加数据安全性。                                                                        |
| 安全性 | - 配置防火墙 (如 `ufw`) 及云服务商提供的网络防火墙。<br>- 定期更新操作系统及所有应用软件的安全补丁。<br>- 使用 SSH 密钥认证登录服务器，禁用密码登录。<br>- 考虑 DDoS 防护方案 (部分云服务商提供，或使用 Cloudflare 等)。<br>- 部署 SSL/TLS 证书 (如 Let's Encrypt) 实现 HTTPS。 |
| 预算 | - 仔细比较不同服务商的 CPU、RAM、存储价格，**尤其关注数据传输费用**。<br>- 注意可能存在的隐藏费用，如固定公网 IP 地址、快照、负载均衡服务等。|
| 联邦宇宙特殊考虑 | - **联邦服务负载：** 服务器需要处理来自其他实例的大量传入和传出活动。<br>- **中继 (Relay)：** 若使用，会增加联邦流量和服务器资源消耗。|
| 建议 | - 从小规模、易于扩展的方案开始。<br>- 优先选择 SSD 硬盘和充足的内存。<br>- 尽早规划媒体文件的存储方案 (对象存储是好选择)。<br>- 参考官方文档或其他联邦宇宙社群经验。|

:::

## 对象存储/OSS
对象存储 (Object Storage) 是一种用于存储和检索数据的服务，通常用于保存大量静态数据，如图片、视频、文档等。大型云服务商均有对象存储服务，如 AWS S3、Cloudflare R2、阿里云 OSS 等。
::: details 详细说明
| 考虑因素 (Consideration Factor) | 核心要点 (Key Points)                                                                                                |
| :------------------------------ | :------------------------------------------------------------------------------------------------------------------- |
| 定价 | - **存储费用**：按实际存储量计费。<br>- **数据传输费**：**重点关注出站流量成本** (Cloudflare R2 是特例，无流出费)。<br>- **请求费用**：`PUT`, `GET` 等操作可能产生费用。|
| 存储类别/层级 | - Fediverse 通常使用**标准存储** (用于频繁访问的媒体)。|
| 性能与延迟 | - **地理位置**：选择靠近用户和后端服务器的区域。<br>- 关注**读写速度**和**一致性模型** (强一致性更佳)。|
| 可用性 | - 查看服务等级协议 (SLA) 中的**可用性百分比**。<br>- 了解数据**持久性设计** (如多副本、冗余)。|
| CDN | - **强烈推荐**：提升访问速度、降低源站负载和流出成本。<br>- 检查与主流 CDN 服务集成的便捷性。|
| 安全性 | - **访问控制**：IAM 用户、存储桶策略、ACLs。<br>- **数据加密**：传输中加密 (HTTPS) 和静态加密 (SSE)。<br>- **日志与监控**：记录访问日志，监控安全事件。 |
| 易用性与管理 | - 用户友好的**控制台界面**。<br>- 完善的 **API 和 SDK** 支持。<br>- 是否有第三方工具支持。|
| 数据迁移 | - 考虑未来数据迁移的难度和成本。|
| 服务商支持 | - 选择运营稳定、信誉良好、技术支持及时的服务商。|
| Fediverse 特定优化 | - 结合 CDN 进行媒体分发。<br>- 可考虑在应用层面进行图片压缩优化以节省存储和流量。|
:::